<section class="section">
  <div class="container">
    <!--Nav and article control-->
    <nav>
      <div class="field is-grouped">

        <p class="control">
          <a class="button" {{action '_toast' 'Hello from this item'}}>
            <span class="icon is-small">
              {{fa-icon 'globe'}}
            </span>
            <span>Official</span>
          </a>
        </p>

        {{article.watch-button article=article watch=(action '_watchArticle' article)}}
        {{article.sell-button  article=article sell=(pipe-action (action '_sellArticle' article)
                                                                 (action '_toast' 'Congratulation!'))}}
      </div>
    </nav>
    <hr>
    <p class="title content is-capitalize has-text-right">{{article.name}}</p>
    <p class="subtitle content has-text-right is-small mb-1">
      Indexed <bold>{{moment-from-now article.createdAt}}</bold>
    </p>
  </div>


  <div class="container">
    <div class="columns is-row-reverse">

      <!--Price panel-->
      <div class="column is-4">
        <div class="columns is-gapless">
          <div class="card is-fullwidth padding-1">
            <div class="level is-mobile">
              <div class="level-item">
                <span class="icon">{{fa-icon 'arrow-up' class='is-primary'}}</span>
              </div>
              <div class="level-item">
                {{ui.-money article.price 'cad' showCode=true}}
              </div>
              <div class="level-item">
                {{ui.-money article.price 'jpy' showCode=true}}
              </div>
            </div>
          </div>
        </div>

        <div class="columns is-gapless">
          <div class="card is-fullwidth padding-1">
            <div class="level is-mobile">
              <div class="level-item price-history-container">
                {{ui.sparkline.-line data=(map-by 'price' (sort-by 'createdAt:desc' article.priceHistory.history))}}
              </div>
            </div>
          </div>
        </div>

        <div class="columns is-gapless">
          <div class="card is-fullwidth padding-1">
            <table class="table is-bordered is-narrow is-striped mt-2 is-fullwidth">
              <tbody>
              {{#if article.priceSummary.max}}
                <tr>
                  <td><b>Highest</b></td>
                  <td>${{article.priceSummary.max.price}}</td>
                  <td>{{moment-from-now article.priceSummary.max.seenAt}}</td>
                </tr>
              {{/if}}

              {{#if article.priceSummary.min}}
                <tr>
                  <td><b>Lowest</b></td>
                  <td>${{article.priceSummary.min.price}}</td>
                  <td>{{moment-from-now article.priceSummary.min.seenAt}}</td>
                </tr>
              {{/if}}
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!--Article panel-->
      <div class="column is-8">
        <article class="message">
          <div class="message-header">Description</div>
          <div class="message-body">{{article.description}}</div>
        </article>
      </div>

    </div>
  </div>
</section>
<section class="section">
  <div class="container">
    <hr>
    <div class="title is-3 has-text-right">Related</div>
    <div class="columns">
      {{#each (repeat 6) as |empty|}}
        <div class="column is-2">
          <div class="card">
            <div class="card-image">
              <figure class="image is-4by3">
                <img src="http://placehold.it/300x225" alt="">
              </figure>
            </div>
            <div class="card-content">
              <p class="title is-6">Article 1</p>
            </div>
          </div>
        </div>
      {{/each}}
    </div>
  </div>
</section>
